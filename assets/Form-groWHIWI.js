import{c as D,d as N,A as M,B as v,C as T,u as t,a as d,q as U,s as L,D as R,o as c,z as q,E as F,j as I,S as V,b as p,v as _,y as A,e as o,w as C,_ as k,g as G,f as S,G as $}from"./index-CpruGpi-.js";import{u as Y,_ as B,C as H}from"./berry-C6l4gS4_.js";/**
 * @license lucide-vue-next v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=D("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-vue-next v0.484.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=D("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),O=N({__name:"Input",props:{defaultValue:{},modelValue:{},class:{}},emits:["update:modelValue"],setup(b,{emit:m}){const r=b,l=M(r,"modelValue",m,{passive:!0,defaultValue:r.defaultValue});return(y,a)=>v((c(),d("input",{"onUpdate:modelValue":a[0]||(a[0]=i=>R(l)?l.value=i:null),class:U(t(L)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r.class))},null,2)),[[T,t(l)]])}}),P={class:"text-2xl pb-4"},Q={key:0,class:"space-y-[10px]"},W={key:1,class:"w-1/2 space-y-6"},X={class:"space-y-1"},te=N({__name:"Form",setup(b){const m=G(),r=q();function h(){m.push({name:"berry"})}const l=r.name==="berry-create"?"create":"edit",y=l==="create"?"Create":"Edit",a=Y(),i=a.form,n=F(!1);l==="create"&&g(),l==="edit"&&a.getDetail(r.params.id).then(()=>{const s=a.detail;a.$patch({form:{id:s.data.id,title:s.data.name}})}).catch(()=>{u()});const x=I(()=>a.detail.loading);function j(s){l==="create"?z(s):l==="edit"&&E(s)}function z(s){n.value=!0,a.create(s).then(e=>e.json()).then(()=>{w(),g()}).catch(()=>{u()}).finally(()=>{n.value=!1})}function E(s){n.value=!0,a.update(s).then(e=>e.json()).then(e=>{e.status==="error"?u():w()}).catch(()=>{u()}).finally(()=>{n.value=!1})}function g(){a.$patch({form:{title:""}})}function u(){V({group:"error",title:"Uh oh! Something went wrong.",text:"There was a problem with your request."},3e3)}function w(){V({group:"success",title:"Success",text:`Your berry was ${l==="create"?"created":"edited"}.`},3e3)}return(s,e)=>(c(),d("main",null,[p("div",P,A(t(y)),1),x.value?(c(),d("div",Q,[o(t(B),{class:"h-[18px] w-[40px]"}),o(t(B),{class:"h-[34px] w-1/2"})])):_("",!0),x.value?_("",!0):(c(),d("div",W,[p("div",X,[e[3]||(e[3]=p("label",{class:"font-medium text-sm"},"Name",-1)),o(t(O),{type:"text",modelValue:t(i).title,"onUpdate:modelValue":e[0]||(e[0]=f=>t(i).title=f)},null,8,["modelValue"])]),o(t(k),{class:"bg-indigo-900 hover:bg-indigo-700",onClick:e[1]||(e[1]=f=>h())},{default:C(()=>[o(t(H)),e[4]||(e[4]=S(" Back "))]),_:1}),o(t(k),{class:"float-right",disabled:!t(i).title||n.value,onClick:e[2]||(e[2]=f=>j(t(i)))},{default:C(()=>[v(o(t(J),{class:"w-4 h-4 mr-2 animate-spin"},null,512),[[$,n.value]]),v(o(t(K),null,null,512),[[$,!n.value]]),e[5]||(e[5]=S(" Save "))]),_:1},8,["disabled"])]))]))}});export{te as default};
